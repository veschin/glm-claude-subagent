{
  "description": "Expected interactive prompts during the install process, in order of appearance.",
  "prompts": [
    {
      "prompt": "Z.AI API key",
      "type": "secret",
      "env_file": "zai_api_key",
      "format": "ZAI_API_KEY=\"<value>\"",
      "validation": "non-empty",
      "skip_if": "zai_api_key file already exists and user declines overwrite"
    },
    {
      "prompt": "Permission mode",
      "type": "choice",
      "options": ["bypassPermissions", "acceptEdits"],
      "default": "bypassPermissions",
      "config_file": "glm.conf",
      "format": "GLM_PERMISSION_MODE=\"<value>\"",
      "skip_if": "glm.conf already exists"
    }
  ],
  "conditional_prompts": [
    {
      "prompt": "Overwrite with a new key?",
      "type": "yn",
      "default": "n",
      "shown_when": "zai_api_key file already exists"
    },
    {
      "prompt": "Replace with symlink?",
      "type": "yn",
      "default": "n",
      "shown_when": "regular file (not symlink) exists at ~/.local/bin/glm"
    }
  ]
}
