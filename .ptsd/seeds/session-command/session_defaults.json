{
  "description": "Default session invocation with no extra flags. Should set Z.AI env vars, unset Claude Code internal vars, and NOT pass execution-mode flags.",
  "args": ["session"],
  "expected_env": {
    "ANTHROPIC_AUTH_TOKEN": "sk-zai-key",
    "ANTHROPIC_BASE_URL": "https://api.z.ai/api/anthropic",
    "ANTHROPIC_DEFAULT_OPUS_MODEL": "glm-4.7",
    "ANTHROPIC_DEFAULT_SONNET_MODEL": "glm-4.7",
    "ANTHROPIC_DEFAULT_HAIKU_MODEL": "glm-4.7"
  },
  "expected_flags_absent": ["-p", "--output-format", "--no-session-persistence"],
  "expected_env_absent": ["CLAUDECODE", "CLAUDE_CODE_ENTRYPOINT"],
  "expected_binary": "claude",
  "note": "Session mode invokes claude without -p (interactive), without --output-format json (human-readable), and without --no-session-persistence (sessions persist). CLAUDECODE and CLAUDE_CODE_ENTRYPOINT are unset via env -u to prevent subagent detection."
}
