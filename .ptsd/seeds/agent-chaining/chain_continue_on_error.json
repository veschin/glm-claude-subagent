{
  "description": "Chain continues on failure when --continue-on-error is set; stdout is injected between steps even on failure",
  "prompts": [
    "Analyze src/db/queries.go for N+1 query issues",
    "Fix the N+1 queries identified in the previous step",
    "Run the test suite to verify fixes"
  ],
  "flags": ["--continue-on-error"],
  "step_results": [
    {
      "step": 1,
      "status": "failed",
      "job_id": "job-20260227-150100-b2c3d4e5",
      "stdout": "Found 2 potential N+1 issues at lines 45 and 89, but could not complete full analysis.",
      "stderr": "err:user \"Claude exited with code 1: token limit reached\"",
      "exit_code": 1
    },
    {
      "step": 2,
      "status": "done",
      "job_id": "job-20260227-150200-c3d4e5f6",
      "stdout": "Applied fixes based on partial analysis. Replaced loop queries with batch SELECT at lines 45 and 89.",
      "injected_prompt": "Previous agent result:\n\nFound 2 potential N+1 issues at lines 45 and 89, but could not complete full analysis.\n\nYour task:\nFix the N+1 queries identified in the previous step",
      "changelog": "EDIT src/db/queries.go: 312 chars"
    },
    {
      "step": 3,
      "status": "done",
      "job_id": "job-20260227-150300-d4e5f6g7",
      "stdout": "All 24 tests pass. No regressions detected.",
      "injected_prompt": "Previous agent result:\n\nApplied fixes based on partial analysis. Replaced loop queries with batch SELECT at lines 45 and 89.\n\nYour task:\nRun the test suite to verify fixes"
    }
  ],
  "expected_final_stdout": "All 24 tests pass. No regressions detected.",
  "expected_exit_code": 1,
  "expected_stderr_contains": ["[1/3] Running step 1...", "[2/3] Running step 2...", "[3/3] Running step 3..."]
}
